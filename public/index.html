<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Socket.IO chat</title>
    
  </head>
  <body>
   <h1 id="text"></h1>
   <h2 id="text2"></h2>
   <h1 id="text3"></h1>
   <div id="boxList"></div>
   <form id="formsend">
    <button type="submit">click</button>
  </form>
   <script src="/socket.io/socket.io.js"></script>
<script>

  const socket = io();
  const text=document.getElementById('text');
  const text2=document.getElementById('text2');
  const text3=document.getElementById('text3');
  const form=document.getElementById('formsend');
  const boxList = document.getElementById("boxList");
  socket.on("playerRole", (role) => {
 
        if (role === "a") {
          text.innerText = "player 1";
        } else if (role === "b") {
          text.innerHTML = "player 2";
        } else {
          text.innerHTML = "player 3";
        }
      });
      socket.on('error',(errorstring)=>{
        text2.innerHTML=errorstring
      alert("server is full;")
      })
      form.addEventListener('click',(e)=>{
        e.preventDefault();
        const randomnumber=Math.floor(Math.random() * (10- 1 + 1) +1);
        console.log(randomnumber);
        socket.emit("addScore",randomnumber);

      })
      socket.on('displayscore',(data)=>{
      
        boxList.innerHTML += `<div >
                              <ul id="textbox"><h1>${data.name}: ${data.score}</h1></ul>
                              </div>`;
      })
      socket.on('winner',(data)=>{
      //  console.log(data.winner);
      //   const winners=data.winner.map((value)=>{
      //     if(value==="a")return "player1";
      //     if(value==="b")return "player2";
      //     if(value==="c") return "player3";
      //   }).join(',');

      //   text3.innerHTML=`${winners}`;
        if(data.winner===data.player.a){
          
           text3.innerHTML=`player1 is a winner`
        }else if(data.winner===data.player.b){
          text3.innerHTML=`player2 is a winner`
        }else if(data.winner===data.player.b){
          text3.innerHTML=`player3 is a winner`
        }
       
      
      })
</script>
  </body>
</html>